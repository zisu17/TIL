# SQL 개요
## SQL (Structured Query Language)
데이터베이스를 사용할 때, 데이터베이스에 접근할 수 있는 데이터베이스 하부 언어를 뜻함  
- SQL은 현재 DBMS 시장에서 관계 DBMS가 압도적인 우위를 차지하는데 중요한 요인 중 하나  
- SQL은 IBM 연구소에서 1974년 System R이라는 관계 DBMS 시제품을 연구할 때 관계 대수와 관계 해석을 기반으로, 집단 함수 그룹화, 갱신 연산 등을 추가하여 개발된 언어  
- 1986년 ANSI(미국표준기구)에서 SQL 표준을 채택함으로써 SQL이 널리 사용되는데 기여  
- 다양한 상용 관계 DBMS마다 지원하는 SQL 기능에 다소 차이가 있음  
- SQL3 이론적으론 상당히 많은 연구가 되어있는데 실제로는 SQL2에서도 쓰는 기능들이 한정되어 있음  
- SQL은 비절차적 언어(선언적 언어)이므로 사용자는 자신이 원하는 바(what)만 명시하며, 원하는 것을 처리하는 방법(how)은 명시할 수 없음  
- 관계 DBMS는 사용자가 입력한 SQL문을 번역하여 사용자가 요구한 데이터를 찾는데 필요한 모든 과정을 담당  
- 자연어에 가까운 구문을 사용하여 질의를 표현할 수 있음  

## SQL의 구성요소
### 1. 데이터 정의어(DDL)  
- 데이터를 정의하는 언어, 테이블이나 관계의 구조를 생성하는 데에 사용  
- SQL2에서는 동일한 데이터베이스 응용에 속하는 릴레이션, 도메인, 제약조건, 뷰, 권한 등을 그룹화하기 위해서 스키마 개념을 지원함
- CREATE, ALTER, DROP, TRUNCATE  
- 스키마 - AUTHORIZATION, RESTRICT, CASCADE  
- 릴레이션 정의에 사용되는 데이터 타입 알아둘 것 (특히 가변길이 문자열 VARCHAR의 개념)
- 무결성 제약조건 - NOT NULL, UNIQUE, DEFAULT, CHECK, REFERENCES

### 2. 데이터 조작어(DML)  
- 데이터베이스에 저장된 자료들을 입력, 수정, 삭제, 조회하는 언어  
- SELECT, INSERT, UPDATE, DELETE  
- 집합 연산 - UNION, EXCEPT, INTERSECT, UNION ALL, EXCEPT ALL, INTERSECT ALL
- SUB QUERY(NESTED QUERY)의 개념 - 릴레이션이 올 수 있는 자리엔 기본적으로 서브쿼리가 올 수 있음

### 3. 데이터 제어어(DCL)  
- 데이터베이스 관리자가 데이터 보안, 무결성 유지, 병행 제어, 회복을 위해 DBA가 사용하는 제어용 언어  
- GRANT, REVOKE  

### 내포된 SQL
불일치 문제와 커서
- 호스트 언어는 단일 변수/레코드 위주의 처리(투플 위주 방식)를 지원하는 반면 SQL은 데이터 레코드들의 처리(집합 위주의 방식)을 지원하기 때문에 불일치 문제가 발생함  
- 불일치 문제를 해결하기 위해서 커서(cursor)가 사용됨 커서란 루프를 수행하면서 현재 어떤 레코드를 가리키고 있는지 알려줌
- 만일 갱신할 투플들에 대해 커서를 정의할 때는 커서 선언부에 FOR UPDATE OF절을 반드시 포함시키고, 수정할 애트리뷰트들을 함께 명시

SQL 통신 영역 (SQLCA : SQL Communications Area)
- 프로그래밍 언어와 DBMS 간의 언어가 필요함 > 제어
- 사용자는 SQLCA 데이터 구조의 에러 필드와 상태 표시자를 검사하여 성공적으로 수행 됐는지 알 수 있음
- 프로그래밍은 결국 예외 처리와 디버깅을 잘 해야 함




